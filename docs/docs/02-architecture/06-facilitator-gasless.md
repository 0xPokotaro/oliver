# Facilitator & Gasless: ガス代負担と署名検証の仕組み

## Facilitator（ファシリテーター）の役割

Facilitatorは、ガスレス決済を実現するためのリレイヤーです。

- 署名を検証
- オンチェーン決済を実行
- ガス代を負担

## ガスレスフロー

EIP-2612 (Permit) と EIP-712 (Intent) を用いて、ユーザーはガス代を負担せずに決済を行えます。

### 権限の分離：Session Key (ERC-7715)

L2（Commerce Module）には、ユーザーの全財産を操作する権限は与えません。

L1が「これは購買だ」と判断した瞬間のみ、特定の予算内でのみ有効な**「一時的な署名権限（Session Key）」**をL2に貸し出します。

これにより、L2モジュールが万が一攻撃を受けても、被害は最小限に抑えられます。

### 決済の自動化：x402 + ERC-1271

L2（Commerce Module）が自律的に動くために、以下の仕組みを組み込みます。

- **x402 Client**: 402エラーを自動でハンドリングし、再試行するロジック。
- **ERC-1271 検証**: L2が生成した署名を、オンチェーンのスマートアカウントが「これは私の正当な代理人（L2）による署名である」と証明する仕組み。

