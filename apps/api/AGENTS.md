# 責務分離の方針

## ハンドラーとサービスの責務

### ハンドラーの責務
- HTTPリクエストの受け取りとバリデーション
- サービスの呼び出し
- サービスの戻り値をそのままHTTPレスポンスとして返却
- CookieやヘッダーなどのHTTP固有の処理

### サービスの責務
- ビジネスロジックの実行
- データベース操作の調整
- **APIレスポンス形式の決定**
- エラーハンドリング（ビジネスロジック層）

### 重要な原則
- ハンドラーではレスポンス形式の決定やデータの変換を行わない
- サービス層が返すレスポンス形式をそのままハンドラーから返す
- これにより、レスポンス形式の変更はサービス層のみで完結し、テスタビリティと保守性が向上する
